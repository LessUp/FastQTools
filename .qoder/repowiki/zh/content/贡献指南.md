# 贡献指南

<cite>
**本文档引用的文件**  
- [CONTRIBUTING.md](file://CONTRIBUTING.md)
- [CODE_OF_CONDUCT.md](file://CODE_OF_CONDUCT.md)
- [SECURITY.md](file://SECURITY.md)
- [docs/git_commit_guide.md](file://docs/git_commit_guide.md)
- [docs/dev/coding-standards.md](file://docs/dev/coding-standards.md)
- [scripts/build.sh](file://scripts/build.sh)
- [scripts/test.sh](file://scripts/test.sh)
- [scripts/lint.sh](file://scripts/lint.sh)
- [docs/user/usage.md](file://docs/user/usage.md)
- [README.md](file://README.md)
</cite>

## 目录
1. [简介](#简介)
2. [行为准则](#行为准则)
3. [报告问题与功能请求](#报告问题与功能请求)
4. [贡献流程](#贡献流程)
5. [技术要求](#技术要求)
6. [提交信息格式](#提交信息格式)
7. [安全漏洞报告](#安全漏洞报告)
8. [资源与帮助](#资源与帮助)

## 简介

欢迎为 FastQTools 项目贡献代码！本指南旨在为新贡献者提供清晰、简洁的指引，帮助您快速上手并顺利参与项目开发。FastQTools 是一个面向 FASTQ 文件的现代 C++ 高性能处理工具集，专注于生物信息学场景中的质控、过滤和统计分析。

我们遵循“保持简单高效”（KISS）的原则，鼓励小而专注的提交，确保代码库的稳定性和可维护性。通过遵循本指南，您可以确保您的贡献符合项目标准，并能被快速审查和合并。

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L1-L45)
- [README.md](file://README.md#L1-L128)

## 行为准则

本项目严格遵守 [贡献者公约](https://www.contributor-covenant.org/version/2/1/code_of_conduct/)（Contributor Covenant）v2.1 的行为准则，致力于营造一个尊重、包容和友好的社区环境。

- **尊重与包容**：请以尊重和包容的态度对待每一位社区成员。
- **善意沟通**：假设他人出于善意，以清晰、礼貌的方式进行沟通。
- **报告不当行为**：如发现任何违反行为准则的行为，请立即向项目维护者报告。

项目维护者负责执行此准则。对于重复或严重违规的行为，将采取包括临时或永久封禁在内的措施。

**Section sources**
- [CODE_OF_CONDUCT.md](file://CODE_OF_CONDUCT.md#L1-L10)

## 报告问题与功能请求

在开始编码之前，我们鼓励您先通过 GitHub Issues 报告问题或提出功能请求。这有助于维护者了解需求、避免重复工作，并为您的贡献提供指导。

- **报告 Bug**：请在 Issue 中详细描述问题现象、复现步骤、预期行为与实际行为，并提供您的环境信息（操作系统、编译器版本等）。
- **提出功能请求**：请清晰地描述您希望添加的功能、其用途以及它如何使项目受益。欢迎提供设计思路或用例。

在提交 Issue 前，请先搜索现有 Issues，确保您的问题或请求尚未被提出。

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L1-L45)

## 贡献流程

以下是向 FastQTools 项目贡献代码的标准流程：

1. **Fork 仓库**：在 GitHub 上 Fork 本仓库到您的个人账户。
2. **创建特性分支**：基于 `main` 分支创建一个新的特性分支（例如 `feature/new-filter`）。
3. **进行修改**：在您的分支上进行代码修改。
4. **保持提交简洁**：每个 Pull Request (PR) 应专注于一个单一的变更。避免在单个 PR 中混合多个不相关的功能或修复。
5. **本地构建与测试**：在提交 PR 前，务必在本地完成完整的构建和测试，确保所有更改都能通过。

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L13-L15)

## 技术要求

为了确保代码质量和一致性，所有贡献必须满足以下技术要求：

### 开发环境
- **编译器**：支持 C++20 的编译器（GCC 11+ 或 Clang 19+）。
- **构建系统**：CMake 3.20+。
- **依赖管理**：推荐使用 Conan 工具链。

### 代码风格
- 代码格式必须遵循项目配置的 `.clang-format` 和 `.clang-tidy` 规则。
- 遵循项目定义的 [编码规范](file://docs/dev/coding-standards.md)，包括命名约定（如 `snake_case` 用于文件，`camelCase` 用于函数和变量）和现代 C++ 实践（如使用智能指针、尾随返回类型等）。

### 格式化与静态检查
在提交代码前，请运行以下脚本以确保代码格式正确：
```bash
./scripts/lint.sh format
./scripts/lint.sh
```

### 测试
- **必须通过所有测试**：在提交 PR 前，运行 `./scripts/test.sh` 确保所有单元测试通过。
- **添加新测试**：对于新功能或 Bug 修复，应相应地添加或更新单元测试。
- **测试要求**：测试应快速、确定且可复现。

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L7-L10)
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L15-L18)
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L33-L37)
- [docs/dev/coding-standards.md](file://docs/dev/coding-standards.md#L1-L170)
- [scripts/lint.sh](file://scripts/lint.sh#L1-L198)
- [scripts/test.sh](file://scripts/test.sh#L1-L271)

## 提交信息格式

为了保持提交历史的可读性和一致性，本项目采用 **Angular 规范** 的变体。请严格按照以下格式编写提交信息。

### 提交格式
```
<类型>(<作用域>): <主题>

<正文> (可选)
<页脚> (可选)
```

### 类型 (type)
- **feat**: 新功能
- **fix**: 修补 bug
- **docs**: 文档修改
- **style**: 格式调整（不影响代码运行）
- **refactor**: 代码重构
- **perf**: 性能优化
- **test**: 增加或修改测试
- **build**: 构建系统或外部依赖更改
- **ci**: CI 配置更改
- **chore**: 其他杂项修改
- **revert**: 回滚提交

### 作用域 (scope)
可选，描述变更影响的模块，例如 `io`、`stats`、`cli`、`config`。

### 主题 (subject)
使用简洁的中文描述本次提交的核心内容。

### 配置与校验
- **设置模板**：在项目根目录运行 `git config --local commit.template .gitmessage.txt` 以使用本地提交模板。
- **自动校验**（可选）：您可以将 `docs/git_commit_guide.md` 中提供的脚本保存为 `.git/hooks/commit-msg`，以实现提交信息的自动格式校验。

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L21-L26)
- [docs/git_commit_guide.md](file://docs/git_commit_guide.md#L1-L58)

## 安全漏洞报告

如果您发现了 FastQTools 的安全漏洞，请**切勿**在公开的 Issue 或 Pull Request 中披露。这可能会使用户面临风险。

请通过私信或邮件直接联系项目维护者进行报告。我们将：
- 尽快确认并复现问题。
- 在必要时发布安全补丁和公告。
- 仅对主分支和最新发布版本提供安全修复支持。

**Section sources**
- [CONTRIBUTING.md](file://CONTRIBUTING.md#L38-L40)
- [SECURITY.md](file://SECURITY.md#L1-L7)

## 资源与帮助

- **构建与运行**：详细信息请参考 [构建指南](file://docs/dev/build.md)。
- **使用示例**：查看 `examples/basic_usage/` 目录下的脚本，了解如何使用工具。
- **用户文档**：[使用指南](file://docs/user/usage.md) 提供了命令行用法和 API 示例。
- **项目架构**：[架构设计](file://docs/dev/architecture.md) 文档解释了项目的技术架构和设计原则。

如果您在贡献过程中遇到任何问题，欢迎在 GitHub Issues 中提问，社区和维护者将尽力提供帮助。

**Section sources**
- [README.md](file://README.md#L1-L128)
- [examples/basic_usage/README.md](file://examples/basic_usage/README.md#L1-L79)
- [docs/user/usage.md](file://docs/user/usage.md#L1-L87)